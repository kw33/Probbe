
SIZE_START; начальный размер блока памяти
SIZE_END_X2; до какого размера удваивать
SIZE_BLOCK = SIZE_END_X2; далее прибавлять этот
                        ; размер
HeapSize
HeapBegin
Heap

---------------------------------
объект: размер окр. до 2^BITGRAN

len in bytes, word
data


...
---------------------------------
;
=---------------------------------
Изменяемая однопоточная куча:
----------------
Битовое поле
Данные
Таблица адресов данных (стэк)
----------------
Клиент запрашивает память из кучи,
получает адрес указателя.
Работает через этот указатель. 
Если гарантировано отсутствие вызовов
функций кучи:
HeapPut 
HeapDel 
HeapDefrag, и др.
то можно пользвать адрес из указателя.
Для данных, в DataBottom сохраняется
адрес незанятого пространства для стэка
с таблицей адресов.
Стэк заполняется до DataBottom, затем
надо сделать HeapDefrag, и если DataBottom
не уменьшилось, увеличить размер кучи.
При удалении объекта из кучи также обнуляется 
адрес в таблице, кот. можно использовать для
следующего объекта.
ОДНАКО
Таблицу перемещать нельзя, поэтому она должна 
лежать в отдельном участке памяти, или быть
стэковой, но после увеличения кучи и перемещения 
её в др. место, можно использовать старую память
кучи для стэковой таблицы! При этом делаем
HeapBottom = HeapBegin и не меняем более.
Тут нужен флаг IsHeapReplaced.
Таблица имеет переменные:
HeapTableBottom 
HeapTableTop 



